//  Common (styles-m.css)
//  _____________________________________________
& when (@media-common =true) {
    // bloco de busca
    .block.block-search {
        // input de pesquisa padrão
        #search {
            .lib-css(border, 1px solid @color-form-border);
            .lib-css(border-radius, 10px);
            .lib-css(padding, 20px);
        }

        // placeholder e input-text com estilo padrão
        #search::placeholder,
        .input-text {
            .lib-css(font-size, 14px);
            .lib-css(color, #000);
            .lib-css(font-weight, 600);
        }

        // Botão de busca
        .action.search {
            .lib-css(height, 100%);
            .lib-css(width, 30px);
        }

        // Ícone da lupa dentro do botão
        .action.search::before {
            .lib-css(content, """");
            .lib-css(display, block);
            .lib-css(width, 19px);
            .lib-css(height, 19px);
            .lib-css(background-image, url("@{baseDir}images/lupa.svg"));
            .lib-css(background-repeat, no-repeat);
            .lib-css(background-size, contain);
            .lib-css(background-position, center);
        }

        // Estado de busca desativada
        .actions .action.search[disabled] {
            .lib-css(opacity, 1);
        }
    }
}

//  Mobile
//  _____________________________________________
.media-width(@extremum, @break)
    when
    (@extremum = "max")
    and
    (@break = @screen__m) {
    // Bloco de busca mobile
    .block.block-search {
        .lib-css(margin, 0);
        .lib-css(position, absolute);
        .lib-css(right, calc(7.5% + 30px));
        .lib-css(display, flex);
        .lib-css(justify-content, center);
        .lib-css(align-items, center);

        .label::before {
            .lib-css(margin, 0);
        }

        .control {
            .lib-css(border, none);
            .lib-css(top, 160%);
            .lib-css(position, absolute);
            .lib-css(transform, translateX(calc(-88.5vw + 48px)));
        }

        // Ícone lupa mobile
        .form.minisearch .field.search .label::before {
            .lib-css(content, """");
            .lib-css(display, flex);
            .lib-css(width, 19px);
            .lib-css(height, 19px);
            .lib-css(background-image, url("@{baseDir}images/lupa.svg"));
            .lib-css(background-repeat, no-repeat);
            .lib-css(background-size, contain);
            .lib-css(background-position, center);
        }

        // Label do campo de busca
        .field.search .label {
            .lib-css(height, 18px);
            .lib-css(width, 18px);
            .lib-css(transform, translateX(50%));
        }

        // input expandido quando ativo
        .field.search input[aria-expanded="true"] {
            .lib-css(width, 92vw);
            .lib-css(margin-top, 27px);
        }
    }
}

//  Desktop
//  _____________________________________________
.media-width(@extremum, @break)
    when
    (@extremum ="min")
    and
    (@break =@screen__m) {
    // Bloco de busca desktop
    .block.block-search {
        .lib-css(max-width, 592px);
        .lib-css(flex, 1);
        .lib-css(margin-right, calc(20% - 80px));

        // ajusta padding-right para evitar colisão do placeholder com o ícone de busca/lupa (tablets)
        #search {
            .lib-css(padding-right, 60px);
        }
    }
}
